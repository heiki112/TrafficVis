<!DOCTYPE HTML>

<html>

<head>
<link rel="stylesheet" type="text/css" href="css/style.css">

<script src="js/lib/three.min.js"></script>
<script src="js/lib/ol.js"></script>
<script src="js/lib/jquery-1.11.2.min.js"></script>
<script src="js/lib/line-navigator.min.js"></script>
<script src="js/lib/file-navigator.min.js"></script>

<script src="js/main.js"></script>
<script src="js/structures.js"></script>

<script id="vertexShader" type="x-shader/x-vertex">
	attribute vec3 posTimeStart;
	attribute vec3 posTimeEnd;
	uniform float time;
	uniform float scale;
	
	const vec2 zero = vec2(0.0, 0.0);
	
	void main() {
		if(posTimeStart.xy == zero || posTimeEnd.xy == zero)
			return;
		
		gl_PointSize = scale;
		
		float timeDiff = posTimeEnd.z - posTimeStart.z;
		if(timeDiff == 0.0){
			gl_Position = projectionMatrix * modelViewMatrix * vec4(posTimeStart.x, posTimeStart.y, 0.0, 1.0);
		}
		else{
			float interpolate = (time - posTimeStart.z)/(timeDiff);
			vec3 mapPos = vec3(mix(posTimeStart.x, posTimeEnd.x, interpolate), mix(posTimeStart.y, posTimeEnd.y, interpolate), 0);
			gl_Position = projectionMatrix * modelViewMatrix * vec4(mapPos, 1.0);
		}
	}
	
</script>
<script id="fragmentShader" type="x-shader/x-fragment">
	uniform sampler2D texture;
	
	void main() {
		vec4 color = vec4(0.9, 0.2, 0.0, 1.0);
			
		/*vec2 remap = (gl_PointCoord - 0.5) * 2.0;
		float dist = pow(remap.x, 2.0) + pow(remap.y, 2.0);
		if(dist < 1.0)
			gl_FragColor = color;*/
			
		gl_FragColor = color * texture2D( texture, gl_PointCoord );
	}
	
</script>

</head>

<body onload="init()">
	
	<div id="taskbar">
		<input type="file" name="file" id="file">
	</div>

	<div id="map" class="mainArea" ></div>
	<div id="overlay" class="mainArea" ></div>
	
	<div id="buttons">
		<button id="reset" onclick="reset()">&#9632</button>
		<button id="slower" onclick="slower()">&#9668&#9668</button>
		<button id="startStop" onclick="startStop()">&#9658</button>
		<button id="faster" onclick="faster()">&#9658&#9658</button>
		<div id="speed">Playback speed: 1x</div>
	</div>
	
	<div class='clickable'>
		<div class="progress"></div>
	</div>
	
	<div id="loading">
		<img src="images/ajax-loader.gif">
	</div>
	
</body>
</html>