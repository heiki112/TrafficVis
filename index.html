<!DOCTYPE HTML>

<html>

<head>
<link rel="stylesheet" type="text/css" href="style.css">

<script src="/lib/three.min.js"></script>
<script src="/lib/ol.js"></script>
<script src="/lib/jquery-1.11.2.min.js"></script>

<script src="main.js"></script>

<script id="vertexShader" type="x-shader/x-vertex">
	attribute vec2 lonLat1;
	attribute vec2 lonLat2;
	uniform float timeInterpolate;
	uniform float scale;
	uniform float flip;
	
	//varying float movement;
	
	void main() {
		gl_PointSize = scale;
		float z = 0.00;
		/*if(lonLat1 - lonLat2 == vec2(0.0)){
			movement = 0.0;
			z -= 0.01;
		}
		else
			movement = 1.0;*/
		
		vec2 mapStart, mapEnd;
		if(flip == 1.0){
			mapStart = lonLat1;
			mapEnd = lonLat2;
		} else {
			mapStart = lonLat2;
			mapEnd = lonLat1;
		}
		vec3 mapPos = vec3(mix(mapStart.x, mapEnd.x, timeInterpolate), mix(mapStart.y, mapEnd.y, timeInterpolate), 0);
		
		vec3 positionNew = mapPos;
		gl_Position = projectionMatrix * modelViewMatrix * vec4(positionNew, 1.0);
	}
	
</script>
<script id="fragmentShader" type="x-shader/x-fragment">
	uniform sampler2D texture;
	//varying float movement;
	
	void main() {
		vec4 color = vec4(0.8, 0.3, 0.0, 1.0);
		/*if(movement == 0.0)
			color.xyz = color.xyz/2.0;*/
			
		/*vec2 remap = (gl_PointCoord - 0.5) * 2.0;
		float dist = pow(remap.x, 2.0) + pow(remap.y, 2.0);
		if(dist < 1.0)
			gl_FragColor = color;*/
			
		gl_FragColor = color * texture2D( texture, gl_PointCoord );
	}
	
</script>

</head>

<body onload="init()">
	
	<div id="taskbar">
		<input type="file" name="file" id="file">
	</div>

	<div id="map" class="mainArea" ></div>
	<div id="overlay" class="mainArea" ></div>
	
	<div id="buttons">
		<button onclick="reset()">Reset</button>
		<button onclick="slower()">Slower</button>
		<button onclick="start()">Play</button>
		<button onclick="stop()">Stop</button>
		<button onclick="faster()">Faster</button>
	</div>
	
	<div class='clickable'>
			<div class="progress"></div>
	</div>
	
</body>
</html>